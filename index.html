<!DOCTYPE html>

<html>
<head>
  <meta http-equiv="CONTENT-TYPE" content="text/html; charset=UTF-8">
  <link rel="stylesheet" href="styles/style.css"/>
  <script src="scripts/script.js" language="javascript"></script>
    <title>qr code generator</title>
</head>
<body>
  <div class="container">
    
    <label for="qrtext">Please enter the text or URL</label>
    <input type="text" id="qrtext" placeholder="Text or URL" required>
    
    <div id="qrcontainer">
    </div>
    
    <button type="button" class="btn" id="genbtn">Generate QR code</button>
    
    <a href="" class="hide" id="downloadBtn" download="QR-code.jpg">Download</a>
  </div>
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.js"></script>

  <script language="javascript">
  
    let qrcontainer = document.getElementById('qrcontainer');
  
  let qrtext = document.getElementById("qrtext");
  let genbtn= document.getElementById('genbtn');
  let downloadBtn = document.getElementById("downloadBtn");
  let qrImg;
  generateQr = (qrtext)=>{
    qrcontainer.innerHTML = "";
    return new QRCode(qrcontainer, {
    text: qrtext,
    width: 200,
    height: 200,
    margin:100,
    colorDark : "#000000",
    colorLight : "#ffffff",
    correctLevel : QRCode.CorrectLevel.H
});
    
  }
  
  genbtn.addEventListener("click",(e)=>{
    let text = qrtext.value;
    qrcode = generateQr(text);
    downloadBtn.classList.remove("hide");
    downloadBtn.classList.add("btn");
    qrcontainer.style.display="flex";
    
  });
  
  downloadImg = ()=>{
  
    const qrImg = qrcontainer.querySelector("canvas");
    if(qrImg){
      
        //converting canvas to image
    const imgSrc = qrImg.toDataURL("image/jpeg",1.0);
    
    
    downloadBtn.href = imgSrc;
      console.log("Image downloaded!");
    }
    
  }
 downloadBtn.addEventListener("click",downloadImg)
  
  
  </script>
</body>
</html>
